<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="google-site-verification" content="21A3vpTGh97_AfzsV2BpLfz9fINsmm0ejFst-GwTjtw" />
    <link rel="icon" type="image/x-icon" href="/img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.simplecss.org/simple.min.css">
    <title>Measure. Just Testing Analytics Stuff</title>
  
    <!-- Generic functions -->
    <script>
      // User ID handling
      const characters ='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
  
      function generateString(length) {
        let result = '';
        const charactersLength = characters.length;
        for ( let i = 0; i < length; i++ ) {
          result += characters.charAt(Math.floor(Math.random() * charactersLength));
        }
        return result;
      }
      var userID = undefined;
      if (!sessionStorage.getItem('userID')){
        userID = generateString(25);
        sessionStorage.setItem('userID', userID);
      } else {
        userID = sessionStorage.getItem('userID');
      }
      // End User ID handling
    </script>
    <!-- End Generic functions -->
    
    <!-- OneTrust Cookies Consent Notice -->
    <script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" type="text/javascript" charset="UTF-8" data-domain-script="ec143f96-fecd-436c-81f6-07d42d9c3ade" data-dLayer-ignore="true" data-document-language="true"></script>
    <script type="text/javascript">function OptanonWrapper(){}</script>
    <!-- End OneTrust Cookies Consent Notice -->   
      
    <!-- dataLayer init -->
    <script> 
    window.dataLayer = window.dataLayer || [];
    dataLayer.push({
      event: 'dataLayer_initialized',
      user: {
        user_unity_id: userID,  // use undefined if not available
        user_logged_in: 'no'    // yes OR no
      },  
      environment: {
        environment_locale: 'en_ca', // use undefined if not available. ex: ca-fr
        environment_currency: 'CAD'  // use undefined if not available. ex: eur  
      }
    });
    </script> 
    <!-- End dataLayer init -->
  
    <!-- Google Tag Manager GTM-MWJRLWVB -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MWJRLWVB');</script>
    <!-- End Google Tag Manager -->

    <style>
    /* The Modal (background) */
    .modal {
      display: none; /* Hidden by default */
      position: fixed; /* Stay in place */
      z-index: 1; /* Sit on top */
      left: 0;
      top: 0;
      width: 100%; /* Full width */
      height: 100%; /* Full height */
      overflow: auto; /* Enable scroll if needed */
      background-color: rgb(0,0,0); /* Fallback color */
      background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
    }
    
    /* Modal Content/Box */
    .modal-content {
      background-color: #fefefe;
      margin: 15% auto; /* 15% from the top and centered */
      padding: 20px;
      border: 1px solid #888;
      width: 80%; /* Could be more or less, depending on screen size */
    }
    
    /* The Close Button */
    .close {
      color: #aaa;
      float: right;
      font-size: 28px;
      font-weight: bold;
    }
    
    .close:hover,
    .close:focus {
      color: black;
      text-decoration: none;
      cursor: pointer;
    }
    </style>
    
  </head>
  <body>
    <header>
      <nav>
        <a href="/">Home</a>
        <a href="/ecomm.html">eComm</a>
      </nav>
      <h1>Measure</h1>
      <p><a href="https://www.anilopez.com">Ani Lopez</a> testing Web Analytics Implementations</p>
    </header>

    <main>
      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce nec viverra neque. Curabitur finibus porttitor quam, id dignissim massa mattis eu. Suspendisse dapibus nunc vel erat cursus efficitur. Aliquam ultricies eros eget urna ultricies, vitae rutrum arcu tristique. Cras sed diam ullamcorper, molestie augue a, ullamcorper tortor. Vestibulum eget ipsum at lectus imperdiet semper quis id augue. Sed rutrum magna magna, eget porttitor augue consectetur id. Sed eu nulla non erat luctus egestas non dapibus odio. Proin porttitor ipsum sed turpis semper convallis. In accumsan augue nec pulvinar hendrerit. Suspendisse fermentum ex eget neque pulvinar faucibus. Mauris semper accumsan elit, a cursus dolor sodales vitae.</p>
      <pre id="code"></pre>
      <p>Aliquam pellentesque eros vel mauris scelerisque, in placerat nulla suscipit. Curabitur pulvinar congue arcu vitae finibus. Vestibulum suscipit magna et sem varius sagittis. Nullam luctus congue felis at ultrices. Pellentesque at velit sed dui posuere interdum ac vel magna. Sed dolor mi, gravida ac sem vitae, laoreet suscipit ipsum. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec volutpat aliquet justo et congue. Praesent enim nunc, facilisis sit amet tristique sit amet, fringilla eget sem. Sed nec posuere arcu, in sollicitudin nunc. Nunc quam quam, porttitor ut condimentum et, eleifend et tellus.</p>
      <img alt="A dog on an iPad" src="/img/dog-ipad.jpg" />
      <p>Phasellus ut cursus tellus. Morbi ac magna ut magna fermentum tincidunt. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse feugiat, ante in gravida tristique, ipsum ante dapibus orci, non fermentum mi velit id lacus. Duis ac nulla ut odio laoreet dictum id eu purus. Sed ornare maximus est, in facilisis magna ullamcorper nec. Duis ac elit eros. Phasellus leo turpis, ultrices sit amet molestie ut, porta vitae arcu. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Duis hendrerit mattis malesuada. Proin ultrices consequat massa at sollicitudin. Pellentesque et aliquam nunc. Donec ac porta orci. Proin consequat mollis purus non porttitor. Nulla aliquam consectetur dui eget ultricies. Proin sed tortor eleifend, porttitor enim eget, maximus nunc.</p>
      
      <button id="myBtn0">Fire event</button>
      
      <!-- Trigger/Open The Modal -->
      <button id="myBtn1">Open Modal</button>
      <!-- The Modal -->
      <div id="myModal" class="modal">
        <!-- Modal content -->
        <div class="modal-content">
          <span class="close">&times;</span>
          <p><button id="myBtn2">Fire event in modal</button></p>
        </div>
      </div>
      
      <!-- YT video -->
      <div>
        <script>
          // loads the IFrame Player API code asynchronously.
          var tag = document.createElement('script');
        
          tag.src = "https://www.youtube.com/iframe_api";
          var firstScriptTag = document.getElementsByTagName('script')[0];
          firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
        
          // reates an <iframe> (and YouTube player) after the API code downloads.
          var player;
          function onYouTubeIframeAPIReady() {
            player = new YT.Player('player', {
              height: '390',
              width: '640',
              videoId: 'h-YSqYxKGmk',
              playerVars: {
                'playsinline': 1
              },
              events: {
                'onReady': onPlayerReady,
                'onStateChange': onPlayerStateChange
              }
            });
          }
        
          // API will call this function when the video player is ready.
          function onPlayerReady(event) {
            event.target.playVideo();
            window.dataLayer.push({
              event:'video-play'
            });
          }
        
          // 5. The API calls this function when the player's state changes.
          //    The function indicates that when playing a video (state=1),
          //    the player should play for nine seconds and then stop.
          var done = false;
          function onPlayerStateChange(event) {
            if (event.data == YT.PlayerState.PLAYING && !done) {
              setTimeout(stopVideo, 9000);
              done = true;
            }
          }
        
          function stopVideo() {
            player.stopVideo();
            window.dataLayer.push({
              event:'video-stop'
            });
          }
        </script>
      </div> 
    </main>

    <footer>
      <div class="sharethis-sticky-share-buttons"></div>
    </footer>

    <!-- Local funtions -------------------------------------------------------------------------------------->
    <script>
      // display user ID
      document.getElementById('code').innerHTML = "User ID is: " + userID;
      
      // fire event
      var btn0 = document.getElementById("myBtn0");
      btn0.onclick = function() {
        window.dataLayer.push({
          event: 'test_event',
          properties: {}
        });
      }
      
      // Modal window
      var modal = document.getElementById("myModal");
      var btn1 = document.getElementById("myBtn1");
      var span = document.getElementsByClassName("close")[0];
      // open modal 
      btn1.onclick = function() {
        modal.style.display = "block";
        window.dataLayer.push({
          event: 'pageview',
          event_name: 'page_view_modal',
          properties: {
            page_path: '/payment-methods',
            page_title: 'Measure. Payment Methods Management'
          }
        });
      }
      // close modal
      span.onclick = function() {
        modal.style.display = "none";
      }
      window.onclick = function(event) {
        if (event.target == modal) {
          modal.style.display = "none";
        }
      }
      
      // fire event in modal
      var btn2 = document.getElementById("myBtn2");
      btn2.onclick = function() {
        window.dataLayer.push({
          event: 'test_event',
          properties: {
            is_modal: true,
            page_path: '/modal',
            page_title: 'Measure: Modal Window'
          }
        });
      }
    </script>
    <!-- End Local funtions ---------------------------------------------------------------------------------->
    <script src="https://measurestrategy.github.io/scripts.js"></script>
  </body>
</html>
